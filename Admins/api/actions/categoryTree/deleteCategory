import * as categoryDB from './../../DbApi/Categories';
let ids = [];

export default function deleteCategory(req) {
  return new Promise((resolve, reject) => {
    // console.log('my res: ' + JSON.stringify(req.body));

    categoryDB.getCategories().then(data => {
      ids.push(req.body.id);
      findNode(req.body.id, data);
      // for(let id in ids) {
      //   categoryDB.deleteCategory(id);
      // }
      resolve(ids);
    }).catch(error => {
      reject('error in deleteCategory: ' + error);
    });
  });
}

function findNode(id, data) {
  for(let category in data) {
    if(category.parentId === id) {
      ids.push(category._id);
      findNode(category._id, data);
    }
  }
}